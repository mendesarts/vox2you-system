<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vox2You - Dashboard</title>
    <style>
        :root { --primary: #075e54; --bg: #f0f2f5; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); display: flex; height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: 250px; background: white; padding: 20px; box-shadow: 2px 0 5px rgba(0,0,0,0.05); display: flex; flex-direction: column; }
        .logo { font-size: 24px; font-weight: bold; color: var(--primary); margin-bottom: 40px; }
        .menu-item { padding: 15px; cursor: pointer; color: #555; border-radius: 8px; margin-bottom: 5px; transition: 0.2s; }
        .menu-item:hover, .menu-item.active { background: #e8f5e9; color: var(--primary); font-weight: bold; }
        
        /* Main Content */
        .main { flex: 1; padding: 40px; overflow-y: auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        h2 { margin: 0; color: #333; }
        
        /* Cards */
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; }
        
        /* Task List */
        .task-input { display: flex; gap: 10px; margin-bottom: 20px; }
        input { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 6px; }
        button { padding: 12px 24px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; }
        
        .task-item { display: flex; justify-content: space-between; padding: 15px; border-bottom: 1px solid #eee; align-items: center; }
        .task-item:last-child { border: none; }
        .badge { padding: 5px 10px; border-radius: 20px; font-size: 12px; background: #eee; }
        .badge.high { background: #ffebee; color: #c62828; }
        
        /* Logs */
        .log-box { background: #2d3436; color: #dfe6e9; padding: 15px; border-radius: 8px; font-family: monospace; height: 200px; overflow-y: auto; font-size: 12px; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo">Vox2You üöÄ</div>
        <div class="menu-item active">Dashboard</div>
        <div class="menu-item">Alunos (CRM)</div>
        <div class="menu-item" onclick="window.location.href='/public/index.html'">Conex√£o WhatsApp</div>
    </div>

    <div class="main">
        <div class="header">
            <h2>Vis√£o Geral</h2>
            <div class="badge">Sistema Online</div>
        </div>

        <div class="card">
            <h3>üìù Tarefas do Sistema</h3>
            <div class="task-input">
                <input type="text" id="newTask" placeholder="Nova tarefa...">
                <button onclick="addTask()">Adicionar</button>
            </div>
            <div id="taskList">
                <p style="color:#999">Carregando tarefas...</p>
            </div>
        </div>

        <div class="card">
            <h3>ü§ñ Atividade Recente (IA & WhatsApp)</h3>
            <div class="log-box" id="activity-log">
                <div>> Sistema iniciado...</div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = '/api/tasks';

        // Carregar Tarefas
        async function loadTasks() {
            try {
                const res = await fetch(API_URL);
                const tasks = await res.json();
                const list = document.getElementById('taskList');
                list.innerHTML = '';
                
                tasks.forEach(task => {
                    list.innerHTML += `
                        <div class="task-item">
                            <span>${task.title}</span>
                            <span class="badge ${task.priority}">${task.status}</span>
                            <button onclick="deleteTask(${task.id})" style="background:none; color:red; padding:0;">‚úï</button>
                        </div>
                    `;
                });
            } catch (e) { console.error(e); }
        }

        // Adicionar Tarefa
        async function addTask() {
            const title = document.getElementById('newTask').value;
            if(!title) return;
            
            await fetch(API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ title, status: 'pending', priority: 'medium' })
            });
            document.getElementById('newTask').value = '';
            loadTasks();
        }

        async function deleteTask(id) {
            await fetch(`${API_URL}/${id}`, { method: 'DELETE' });
            loadTasks();
        }

        // Inicia
        loadTasks();
    </script>
</body>
</html>
